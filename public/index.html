<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Management System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>Welcome to Waste Management</h2>
            <p>Enter your username to continue:</p>
            <form id="loginForm">
                <input type="text" id="username" placeholder="Enter username" required>
                <button type="submit">Login</button>
            </form>
            <div class="login-info">
                <p><strong>Demo Users:</strong></p>
                <ul>
                    <li><code>admin</code> - Admin access</li>
                    <li><code>worker1</code> - Worker access</li>
                    <li><code>john</code> - Public user</li>
                    <li>Or enter any username for public access</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1><i class="fas fa-recycle"></i> Waste Management</h1>
            <div class="user-info">
                <span id="userWelcome"></span>
                <button id="logoutBtn" class="btn btn-secondary">Logout</button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <ul class="nav-menu" id="navMenu">
                <li><a href="#" data-section="dashboard" class="nav-link active">Dashboard</a></li>
                <li><a href="#" data-section="map" class="nav-link">Map View</a></li>
                <li><a href="#" data-section="complaints" class="nav-link">Complaints</a></li>
                <li><a href="#" data-section="schedule" class="nav-link">Schedule</a></li>
                <li id="adminNav" style="display:none;"><a href="#" data-section="admin" class="nav-link">Admin
                        Panel</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-trash"></i>
                        <h3 id="totalBins">0</h3>
                        <p>Total Bins</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-exclamation-circle"></i>
                        <h3 id="pendingComplaints">0</h3>
                        <p>Pending Complaints</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar"></i>
                        <h3 id="scheduledCollections">0</h3>
                        <p>Scheduled Collections</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle"></i>
                        <h3 id="completedTasks">0</h3>
                        <p>Completed Tasks</p>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showSection('complaints')">
                            <i class="fas fa-plus"></i> Submit Complaint
                        </button>
                        <button class="btn btn-primary" onclick="showSection('schedule')">
                            <i class="fas fa-calendar-plus"></i> Schedule Collection
                        </button>
                        <button class="btn btn-primary" onclick="showSection('map')">
                            <i class="fas fa-map-marker-alt"></i> View Bins
                        </button>
                    </div>
                </div>
            </section>

            <!-- Map Section -->
            <section id="map" class="section">
                <h2>Waste Bins Map - CET Engineering College Area</h2>
                <div class="map-controls">
                    <div class="filter-controls">
                        <label>Filter by type:</label>
                        <select id="binTypeFilter">
                            <option value="">All Types</option>
                            <option value="paper">Paper</option>
                            <option value="plastic">Plastic</option>
                            <option value="metal">Metal</option>
                        </select>
                    </div>
                    <div id="workerControls" class="worker-controls" style="display:none;">
                        <button class="btn btn-primary" id="addBinBtn">
                            <i class="fas fa-plus"></i> Add Bin
                        </button>
                    </div>
                </div>
                <div id="mapContainer" class="map-container"></div>

                <!-- Add Bin Modal -->
                <div id="addBinModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h3>Add New Bin</h3>
                        <form id="addBinForm">
                            <div class="form-group">
                                <label for="binType">Bin Type:</label>
                                <select id="binType" required>
                                    <option value="">Select Type</option>
                                    <option value="paper">Paper</option>
                                    <option value="plastic">Plastic</option>
                                    <option value="metal">Metal</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="binLocation">Location Name:</label>
                                <input type="text" id="binLocation" placeholder="e.g., CET Library" required>
                            </div>
                            <div class="form-group">
                                <label for="binLat">Latitude:</label>
                                <input type="number" id="binLat" step="any" placeholder="Click on map to set" readonly>
                            </div>
                            <div class="form-group">
                                <label for="binLng">Longitude:</label>
                                <input type="number" id="binLng" step="any" placeholder="Click on map to set" readonly>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Add Bin</button>
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeModal('addBinModal')">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Complaints Section -->
            <section id="complaints" class="section">
                <h2>Complaints Management</h2>

                <div class="section-actions">
                    <button class="btn btn-primary" id="newComplaintBtn">
                        <i class="fas fa-plus"></i> Submit New Complaint
                    </button>
                </div>

                <div class="complaints-list" id="complaintsList">
                    <!-- Complaints will be loaded here -->
                </div>

                <!-- New Complaint Modal -->
                <div id="newComplaintModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h3>Submit New Complaint</h3>
                        <form id="newComplaintForm">
                            <div class="form-group">
                                <label for="complaintTitle">Title:</label>
                                <input type="text" id="complaintTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="complaintDescription">Description:</label>
                                <textarea id="complaintDescription" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="complaintPriority">Priority:</label>
                                <select id="complaintPriority">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="complaintLocationName">Location:</label>
                                <input type="text" id="complaintLocationName" placeholder="e.g., CET Main Gate">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Submit Complaint</button>
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeModal('newComplaintModal')">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Schedule Section -->
            <section id="schedule" class="section">
                <h2>Waste Collection Schedule</h2>

                <div class="section-actions">
                    <button class="btn btn-primary" id="newScheduleBtn">
                        <i class="fas fa-calendar-plus"></i> Schedule Collection
                    </button>
                </div>

                <div class="schedule-calendar" id="scheduleCalendar">
                    <!-- Calendar will be implemented here -->
                </div>

                <div class="schedule-list" id="scheduleList">
                    <!-- Schedules will be loaded here -->
                </div>

                <!-- New Schedule Modal -->
                <div id="newScheduleModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h3>Schedule Waste Collection</h3>
                        <form id="newScheduleForm">
                            <div class="form-group">
                                <label for="scheduleBin">Select Bin (Optional):</label>
                                <select id="scheduleBin">
                                    <option value="">General Collection</option>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleDate">Collection Date:</label>
                                <input type="date" id="scheduleDate" required>
                            </div>
                            <div class="form-group">
                                <label for="scheduleTime">Collection Time:</label>
                                <input type="time" id="scheduleTime" required>
                            </div>
                            <div class="form-group" id="workerAssignmentGroup" style="display:none;">
                                <label for="assignedWorker">Assign Worker:</label>
                                <select id="assignedWorker">
                                    <option value="">No specific assignment</option>
                                    <!-- Workers will be populated dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleNotes">Public Notes:</label>
                                <textarea id="scheduleNotes" rows="3"
                                    placeholder="Any special instructions visible to workers..."></textarea>
                            </div>
                            <div class="form-group" id="adminNotesGroup" style="display:none;">
                                <label for="adminNotes">Admin Notes:</label>
                                <textarea id="adminNotes" rows="2"
                                    placeholder="Internal notes for admin reference..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Schedule Collection</button>
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeModal('newScheduleModal')">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Assign Worker Modal -->
                <div id="assignWorkerModal" class="modal worker-assignment-modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h3>Assign Worker to Collection</h3>
                        <form id="assignWorkerForm">
                            <div class="form-group">
                                <label for="assignWorkerSelect">Select Worker:</label>
                                <select id="assignWorkerSelect" required>
                                    <option value="">Choose a worker...</option>
                                    <!-- Workers will be populated dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="assignmentNotes">Assignment Notes:</label>
                                <textarea id="assignmentNotes" rows="3"
                                    placeholder="Any special instructions for the assigned worker..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Assign Worker</button>
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeModal('assignWorkerModal')">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section -->
            <section id="admin" class="section">
                <h2>Admin Panel</h2>

                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('users')">Users</button>
                    <button class="tab-btn" onclick="showAdminTab('bins')">Bins Management</button>
                    <button class="tab-btn" onclick="showAdminTab('complaints')">All Complaints</button>
                    <button class="tab-btn" onclick="showAdminTab('schedules')">All Schedules</button>
                </div>

                <div id="adminUsers" class="admin-tab-content active">
                    <h3>User Management</h3>
                    <div id="usersList">
                        <!-- Users list will be loaded here -->
                    </div>
                </div>

                <div id="adminBins" class="admin-tab-content">
                    <h3>Bins Management</h3>
                    <div id="adminBinsList">
                        <!-- Admin bins list will be loaded here -->
                    </div>
                </div>

                <div id="adminComplaints" class="admin-tab-content">
                    <h3>All Complaints</h3>
                    <div id="adminComplaintsList">
                        <!-- Admin complaints list will be loaded here -->
                    </div>
                </div>

                <div id="adminSchedules" class="admin-tab-content">
                    <h3>All Schedules</h3>
                    <div id="adminSchedulesList">
                        <!-- Admin schedules list will be loaded here -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Waste Management System - CET Engineering College, Trivandrum</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/app.js"></script>
</body>

</html>